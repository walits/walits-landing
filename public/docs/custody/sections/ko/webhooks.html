<h1 class="text-4xl font-bold mb-6">웹훅 이벤트</h1>

        <div class="bg-blue-50 border-l-4 border-blue-500 p-6 mb-6">
          <p class="font-semibold text-lg mb-2">📡 실시간 알림</p>
          <p>Walits은 입금, 출금 및 승인 상태 변경과 같은 중요한 이벤트에 대해 귀사의 서버로 웹훅을 전송합니다.</p>
        </div>

        <h2 class="text-2xl font-semibold mt-8 mb-4">지원 이벤트 (총 15개)</h2>

        <h3 class="text-xl font-semibold mt-6 mb-3">입금 및 출금 이벤트 (8개)</h3>
        <table class="w-full border border-gray-200 mb-6">
          <thead class="bg-gray-50">
            <tr>
              <th class="border border-gray-200 px-4 py-3 text-left">이벤트</th>
              <th class="border border-gray-200 px-4 py-3 text-left">설명</th>
              <th class="border border-gray-200 px-4 py-3 text-left">일반적 사용 사례</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="border border-gray-200 px-4 py-2 font-mono text-sm">DEPOSIT_DETECTED</td>
              <td class="border border-gray-200 px-4 py-2">입금 감지됨 (1 컨펌)</td>
              <td class="border border-gray-200 px-4 py-2">UI에 "보류 중인 입금" 표시</td>
            </tr>
            <tr class="bg-green-50">
              <td class="border border-gray-200 px-4 py-2 font-mono text-sm">DEPOSIT_CONFIRMED</td>
              <td class="border border-gray-200 px-4 py-2">입금 확정 (12 컨펌)</td>
              <td class="border border-gray-200 px-4 py-2">사용자 잔액 크레딧 ✅</td>
            </tr>
            <tr class="bg-blue-50">
              <td class="border border-gray-200 px-4 py-2 font-mono text-sm">WITHDRAWAL_REQUESTED</td>
              <td class="border border-gray-200 px-4 py-2">출금 요청 생성됨, 잔액 즉시 홀드</td>
              <td class="border border-gray-200 px-4 py-2">관리자에게 승인 알림</td>
            </tr>
            <tr>
              <td class="border border-gray-200 px-4 py-2 font-mono text-sm">APPROVAL_PROGRESS</td>
              <td class="border border-gray-200 px-4 py-2">부분 승인 수신 (선택적 이벤트)</td>
              <td class="border border-gray-200 px-4 py-2">UI에 "1/3 승인" 표시</td>
            </tr>
            <tr>
              <td class="border border-gray-200 px-4 py-2 font-mono text-sm">WITHDRAWAL_APPROVED</td>
              <td class="border border-gray-200 px-4 py-2">승인 임계값 충족, 실행 준비</td>
              <td class="border border-gray-200 px-4 py-2">상태를 "승인됨"으로 업데이트</td>
            </tr>
            <tr>
              <td class="border border-gray-200 px-4 py-2 font-mono text-sm">WITHDRAWAL_EXECUTED</td>
              <td class="border border-gray-200 px-4 py-2">블록체인에 트랜잭션 브로드캐스트 (멤풀)</td>
              <td class="border border-gray-200 px-4 py-2">txHash 표시, 익스플로러에서 추적</td>
            </tr>
            <tr class="bg-green-50">
              <td class="border border-gray-200 px-4 py-2 font-mono text-sm">WITHDRAWAL_CONFIRMED</td>
              <td class="border border-gray-200 px-4 py-2">온체인 확정 (12 컨펌)</td>
              <td class="border border-gray-200 px-4 py-2">보류 잔액 해제, 완료 표시</td>
            </tr>
            <tr class="bg-red-50">
              <td class="border border-gray-200 px-4 py-2 font-mono text-sm">WITHDRAWAL_FAILED</td>
              <td class="border border-gray-200 px-4 py-2">출금 실패, 잔액 자동 복원</td>
              <td class="border border-gray-200 px-4 py-2">사용자 알림, 오류 로깅</td>
            </tr>
          </tbody>
        </table>

        <h3 class="text-xl font-semibold mt-6 mb-3">지갑 및 계정 이벤트 (4개)</h3>
        <table class="w-full border border-gray-200 mb-6">
          <thead class="bg-gray-50">
            <tr>
              <th class="border border-gray-200 px-4 py-3 text-left">이벤트</th>
              <th class="border border-gray-200 px-4 py-3 text-left">설명</th>
              <th class="border border-gray-200 px-4 py-3 text-left">일반적 사용 사례</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="border border-gray-200 px-4 py-2 font-mono text-sm">WALLET_CREATED</td>
              <td class="border border-gray-200 px-4 py-2">새 커스터디 지갑 생성됨 (MPC 키 생성 완료)</td>
              <td class="border border-gray-200 px-4 py-2">지갑 주소 기록, 관리자 알림</td>
            </tr>
            <tr>
              <td class="border border-gray-200 px-4 py-2 font-mono text-sm">ACCOUNT_CREATED</td>
              <td class="border border-gray-200 px-4 py-2">새 가상 계정 (입금 주소) 생성됨</td>
              <td class="border border-gray-200 px-4 py-2">고객에게 입금 주소 제공</td>
            </tr>
            <tr>
              <td class="border border-gray-200 px-4 py-2 font-mono text-sm">SWEEP_EXECUTED</td>
              <td class="border border-gray-200 px-4 py-2">입금 주소에서 옴니버스로 자동 스윕 완료</td>
              <td class="border border-gray-200 px-4 py-2">재무조정, 로깅</td>
            </tr>
            <tr>
              <td class="border border-gray-200 px-4 py-2 font-mono text-sm">SWEEP_FAILED</td>
              <td class="border border-gray-200 px-4 py-2">자동 스윕 실패 (가스 부족, RPC 오류)</td>
              <td class="border border-gray-200 px-4 py-2">운영팀 경고</td>
            </tr>
          </tbody>
        </table>

        <h3 class="text-xl font-semibold mt-6 mb-3">리스크 및 운영 이벤트 (3개)</h3>
        <table class="w-full border border-gray-200 mb-6">
          <thead class="bg-gray-50">
            <tr>
              <th class="border border-gray-200 px-4 py-3 text-left">이벤트</th>
              <th class="border border-gray-200 px-4 py-3 text-left">설명</th>
              <th class="border border-gray-200 px-4 py-3 text-left">일반적 사용 사례</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="border border-gray-200 px-4 py-2 font-mono text-sm">LOW_BALANCE_WARNING</td>
              <td class="border border-gray-200 px-4 py-2">가스 예비 잔액이 임계값 미만</td>
              <td class="border border-gray-200 px-4 py-2">운영팀에 가스 탱크 보충 경고</td>
            </tr>
            <tr>
              <td class="border border-gray-200 px-4 py-2 font-mono text-sm">POLICY_CHANGED</td>
              <td class="border border-gray-200 px-4 py-2">지갑 정책 업데이트 (승인 임계값, 한도)</td>
              <td class="border border-gray-200 px-4 py-2">감사 로깅, 컴플라이언스</td>
            </tr>
            <tr>
              <td class="border border-gray-200 px-4 py-2 font-mono text-sm">LARGE_WITHDRAWAL</td>
              <td class="border border-gray-200 px-4 py-2">출금이 구성된 임계값 초과</td>
              <td class="border border-gray-200 px-4 py-2">추가 검증, 컴플라이언스 확인</td>
            </tr>
          </tbody>
        </table>

        <h2 class="text-2xl font-semibold mt-8 mb-4">잔액 조정 타이밍</h2>
        <div class="bg-yellow-50 border-l-4 border-yellow-500 p-6 mb-6">
          <p class="font-semibold text-yellow-900 mb-2">중요: 잔액 변경 시점 이해</p>
          <p class="text-yellow-800">잔액 업데이트 타이밍을 잘못 설정하면 이중 지출 또는 잔액 부족 오류가 발생할 수 있습니다. 이 표를 주의깊게 따르세요.</p>
        </div>

        <h3 class="text-xl font-semibold mt-6 mb-3">입금 잔액 업데이트</h3>
        <table class="w-full border border-gray-200 mb-6">
          <thead class="bg-gray-50">
            <tr>
              <th class="border border-gray-200 px-4 py-3 text-left">이벤트</th>
              <th class="border border-gray-200 px-4 py-3 text-left">잔액 조정</th>
              <th class="border border-gray-200 px-4 py-3 text-left">이유</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="border border-gray-200 px-4 py-2 font-mono text-sm">DEPOSIT_DETECTED</td>
              <td class="border border-gray-200 px-4 py-2 text-red-600 font-semibold">변경 없음</td>
              <td class="border border-gray-200 px-4 py-2">알림만, 재구성으로부터 보호</td>
            </tr>
            <tr class="bg-green-50">
              <td class="border border-gray-200 px-4 py-2 font-mono text-sm">DEPOSIT_CONFIRMED</td>
              <td class="border border-gray-200 px-4 py-2 text-green-600 font-semibold">availableBalance ↑</td>
              <td class="border border-gray-200 px-4 py-2">12 컨펌 후 크레딧 안전</td>
            </tr>
          </tbody>
        </table>

        <h3 class="text-xl font-semibold mt-6 mb-3">출금 잔액 업데이트</h3>
        <table class="w-full border border-gray-200 mb-6">
          <thead class="bg-gray-50">
            <tr>
              <th class="border border-gray-200 px-4 py-3 text-left">이벤트</th>
              <th class="border border-gray-200 px-4 py-3 text-left">availableBalance</th>
              <th class="border border-gray-200 px-4 py-3 text-left">pendingWithdrawalBalance</th>
              <th class="border border-gray-200 px-4 py-3 text-left">이유</th>
            </tr>
          </thead>
          <tbody>
            <tr class="bg-blue-50">
              <td class="border border-gray-200 px-4 py-2 font-mono text-sm">WITHDRAWAL_REQUESTED</td>
              <td class="border border-gray-200 px-4 py-2 text-red-600 font-semibold">↓ 감소</td>
              <td class="border border-gray-200 px-4 py-2 text-green-600 font-semibold">↑ 증가</td>
              <td class="border border-gray-200 px-4 py-2">즉시 홀드로 이중 지출 방지</td>
            </tr>
            <tr>
              <td class="border border-gray-200 px-4 py-2 font-mono text-sm">APPROVAL_PROGRESS</td>
              <td class="border border-gray-200 px-4 py-2">변경 없음</td>
              <td class="border border-gray-200 px-4 py-2">변경 없음</td>
              <td class="border border-gray-200 px-4 py-2">이미 홀드됨</td>
            </tr>
            <tr>
              <td class="border border-gray-200 px-4 py-2 font-mono text-sm">WITHDRAWAL_APPROVED</td>
              <td class="border border-gray-200 px-4 py-2">변경 없음</td>
              <td class="border border-gray-200 px-4 py-2">변경 없음</td>
              <td class="border border-gray-200 px-4 py-2">이미 홀드됨, 실행 대기 중</td>
            </tr>
            <tr>
              <td class="border border-gray-200 px-4 py-2 font-mono text-sm">WITHDRAWAL_EXECUTED</td>
              <td class="border border-gray-200 px-4 py-2">변경 없음</td>
              <td class="border border-gray-200 px-4 py-2">변경 없음</td>
              <td class="border border-gray-200 px-4 py-2">멤풀에 있음, 여전히 홀드됨</td>
            </tr>
            <tr class="bg-green-50">
              <td class="border border-gray-200 px-4 py-2 font-mono text-sm">WITHDRAWAL_CONFIRMED</td>
              <td class="border border-gray-200 px-4 py-2">변경 없음</td>
              <td class="border border-gray-200 px-4 py-2 text-red-600 font-semibold">↓ 감소</td>
              <td class="border border-gray-200 px-4 py-2">홀드 해제, 회계 완료</td>
            </tr>
            <tr class="bg-red-50">
              <td class="border border-gray-200 px-4 py-2 font-mono text-sm">WITHDRAWAL_FAILED</td>
              <td class="border border-gray-200 px-4 py-2 text-green-600 font-semibold">↑ 증가 (롤백)</td>
              <td class="border border-gray-200 px-4 py-2 text-red-600 font-semibold">↓ 감소 (롤백)</td>
              <td class="border border-gray-200 px-4 py-2">자동 잔액 복원</td>
            </tr>
          </tbody>
        </table>

        <div class="bg-blue-50 border-l-4 border-blue-500 p-6 mb-6">
          <p class="font-semibold text-blue-900 mb-2">복식 부기 불변성</p>
          <p class="text-blue-800 font-mono">totalBalance = availableBalance + pendingWithdrawalBalance</p>
          <p class="text-blue-800 mt-2">이 관계는 항상 참이어야 합니다. Walits의 잔액 시스템은 BitGo 및 Fireblocks와 동일한 패턴을 따라 설계되었습니다.</p>
        </div>

        <h2 class="text-2xl font-semibold mt-8 mb-4">이벤트 페이로드 예시</h2>
        <div class="space-y-6">
          <div class="border-l-4 border-green-500 pl-6">
            <h3 class="text-xl font-semibold mb-2">deposit.confirmed</h3>
            <pre><code class="language-json">
{
  "event": "deposit.confirmed",
  "timestamp": "2024-12-09T10:30:00Z",
  "data": {
    "virtualAccountId": "va_xyz789",
    "userId": "user_12345",
    "walletId": "wal_abc123",
    "amount": "10.0",
    "asset": "ETH",
    "txHash": "0x123abc...",
    "confirmations": 1,
    "depositAddress": "0x742d35Cc...",
    "newBalance": "20.5"
  }
}
            </code></pre>
          </div>

          <div class="border-l-4 border-blue-500 pl-6">
            <h3 class="text-xl font-semibold mb-2">withdrawal.confirmed</h3>
            <pre><code class="language-json">
{
  "event": "withdrawal.confirmed",
  "timestamp": "2024-12-09T11:00:00Z",
  "data": {
    "approvalRequestId": "apr_xyz789",
    "walletId": "wal_abc123",
    "amount": "5.0",
    "asset": "ETH",
    "toAddress": "0xRecipient...",
    "txHash": "0x789def...",
    "confirmations": 12,
    "gasPaid": "0.00189",
    "status": "CONFIRMED"
  }
}
            </code></pre>
          </div>
        </div>
